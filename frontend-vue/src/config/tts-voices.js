// é¢„è®¾çš„TTSè¯­éŸ³é…ç½® - åŸºäºGoogle Cloud TTSå®é™…å¯ç”¨è¯­éŸ³
export const TTS_VOICES = {
  'en-US': [
    // Chirp3-HD ç³»åˆ— (æœ€æ–°é«˜è´¨é‡è¯­éŸ³ï¼Œä»¥å¤©ä½“å‘½å)
    { name: 'en-US-Chirp3-HD-Achernar', displayName: 'Achernar (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Achird', displayName: 'Achird (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Algenib', displayName: 'Algenib (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Algieba', displayName: 'Algieba (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Alnilam', displayName: 'Alnilam (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Aoede', displayName: 'Aoede (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Autonoe', displayName: 'Autonoe (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Callirrhoe', displayName: 'Callirrhoe (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Charon', displayName: 'Charon (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Despina', displayName: 'Despina (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Enceladus', displayName: 'Enceladus (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Erinome', displayName: 'Erinome (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Fenrir', displayName: 'Fenrir (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Gacrux', displayName: 'Gacrux (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Iapetus', displayName: 'Iapetus (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Kore', displayName: 'Kore (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Laomedeia', displayName: 'Laomedeia (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Leda', displayName: 'Leda (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Orus', displayName: 'Orus (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Puck', displayName: 'Puck (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Pulcherrima', displayName: 'Pulcherrima (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Rasalgethi', displayName: 'Rasalgethi (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Sadachbia', displayName: 'Sadachbia (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Sadaltager', displayName: 'Sadaltager (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Schedar', displayName: 'Schedar (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Sulafat', displayName: 'Sulafat (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Umbriel', displayName: 'Umbriel (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Vindemiatrix', displayName: 'Vindemiatrix (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Zephyr', displayName: 'Zephyr (Female, Chirp3-HD)', gender: 'FEMALE', quality: 'premium', series: 'Chirp3-HD' },
    { name: 'en-US-Chirp3-HD-Zubenelgenubi', displayName: 'Zubenelgenubi (Male, Chirp3-HD)', gender: 'MALE', quality: 'premium', series: 'Chirp3-HD' },

    // Chirp-HD ç³»åˆ— (é«˜è´¨é‡è¯­éŸ³)
    { name: 'en-US-Chirp-HD-D', displayName: 'Voice D (Male, Chirp-HD)', gender: 'MALE', quality: 'high', series: 'Chirp-HD' },
    { name: 'en-US-Chirp-HD-F', displayName: 'Voice F (Female, Chirp-HD)', gender: 'FEMALE', quality: 'high', series: 'Chirp-HD' },
    { name: 'en-US-Chirp-HD-O', displayName: 'Voice O (Female, Chirp-HD)', gender: 'FEMALE', quality: 'high', series: 'Chirp-HD' },

    // Neural2 ç³»åˆ— (é«˜è´¨é‡ç¥ç»ç½‘ç»œè¯­éŸ³)
    { name: 'en-US-Neural2-A', displayName: 'Voice A (Male, Neural2)', gender: 'MALE', quality: 'high', series: 'Neural2' },
    { name: 'en-US-Neural2-C', displayName: 'Voice C (Female, Neural2)', gender: 'FEMALE', quality: 'high', series: 'Neural2' },
    { name: 'en-US-Neural2-D', displayName: 'Voice D (Male, Neural2)', gender: 'MALE', quality: 'high', series: 'Neural2' },
    { name: 'en-US-Neural2-E', displayName: 'Voice E (Female, Neural2)', gender: 'FEMALE', quality: 'high', series: 'Neural2' },
    { name: 'en-US-Neural2-F', displayName: 'Voice F (Female, Neural2)', gender: 'FEMALE', quality: 'high', series: 'Neural2' },
    { name: 'en-US-Neural2-G', displayName: 'Voice G (Female, Neural2)', gender: 'FEMALE', quality: 'high', series: 'Neural2' },
    { name: 'en-US-Neural2-H', displayName: 'Voice H (Female, Neural2)', gender: 'FEMALE', quality: 'high', series: 'Neural2' },
    { name: 'en-US-Neural2-I', displayName: 'Voice I (Male, Neural2)', gender: 'MALE', quality: 'high', series: 'Neural2' },
    { name: 'en-US-Neural2-J', displayName: 'Voice J (Male, Neural2)', gender: 'MALE', quality: 'high', series: 'Neural2' },

    // Studio ç³»åˆ— (å½•éŸ³æ£šè´¨é‡)
    { name: 'en-US-Studio-O', displayName: 'Voice O (Female, Studio)', gender: 'FEMALE', quality: 'high', series: 'Studio' },
    { name: 'en-US-Studio-Q', displayName: 'Voice Q (Male, Studio)', gender: 'MALE', quality: 'high', series: 'Studio' },

    // News ç³»åˆ— (æ–°é—»æ’­æŠ¥é£æ ¼)
    { name: 'en-US-News-K', displayName: 'Voice K (Female, News)', gender: 'FEMALE', quality: 'high', series: 'News' },
    { name: 'en-US-News-L', displayName: 'Voice L (Female, News)', gender: 'FEMALE', quality: 'high', series: 'News' },
    { name: 'en-US-News-N', displayName: 'Voice N (Male, News)', gender: 'MALE', quality: 'high', series: 'News' },

    // Wavenet ç³»åˆ— (ä¸­ç­‰è´¨é‡)
    { name: 'en-US-Wavenet-A', displayName: 'Voice A (Male, Wavenet)', gender: 'MALE', quality: 'medium', series: 'Wavenet' },
    { name: 'en-US-Wavenet-B', displayName: 'Voice B (Male, Wavenet)', gender: 'MALE', quality: 'medium', series: 'Wavenet' },
    { name: 'en-US-Wavenet-C', displayName: 'Voice C (Female, Wavenet)', gender: 'FEMALE', quality: 'medium', series: 'Wavenet' },
    { name: 'en-US-Wavenet-D', displayName: 'Voice D (Male, Wavenet)', gender: 'MALE', quality: 'medium', series: 'Wavenet' },
    { name: 'en-US-Wavenet-E', displayName: 'Voice E (Female, Wavenet)', gender: 'FEMALE', quality: 'medium', series: 'Wavenet' },
    { name: 'en-US-Wavenet-F', displayName: 'Voice F (Female, Wavenet)', gender: 'FEMALE', quality: 'medium', series: 'Wavenet' },
    { name: 'en-US-Wavenet-G', displayName: 'Voice G (Female, Wavenet)', gender: 'FEMALE', quality: 'medium', series: 'Wavenet' },
    { name: 'en-US-Wavenet-H', displayName: 'Voice H (Female, Wavenet)', gender: 'FEMALE', quality: 'medium', series: 'Wavenet' },
    { name: 'en-US-Wavenet-I', displayName: 'Voice I (Male, Wavenet)', gender: 'MALE', quality: 'medium', series: 'Wavenet' },
    { name: 'en-US-Wavenet-J', displayName: 'Voice J (Male, Wavenet)', gender: 'MALE', quality: 'medium', series: 'Wavenet' },

    // ç‰¹æ®Šè¯­éŸ³
    { name: 'en-US-Casual-K', displayName: 'Voice K (Male, Casual)', gender: 'MALE', quality: 'medium', series: 'Casual' },
    { name: 'en-US-Polyglot-1', displayName: 'Voice 1 (Male, Polyglot)', gender: 'MALE', quality: 'medium', series: 'Polyglot' },

    // Standard ç³»åˆ— (æ ‡å‡†è´¨é‡)
    { name: 'en-US-Standard-A', displayName: 'Voice A (Male, Standard)', gender: 'MALE', quality: 'basic', series: 'Standard' },
    { name: 'en-US-Standard-B', displayName: 'Voice B (Male, Standard)', gender: 'MALE', quality: 'basic', series: 'Standard' },
    { name: 'en-US-Standard-C', displayName: 'Voice C (Female, Standard)', gender: 'FEMALE', quality: 'basic', series: 'Standard' },
    { name: 'en-US-Standard-D', displayName: 'Voice D (Male, Standard)', gender: 'MALE', quality: 'basic', series: 'Standard' },
    { name: 'en-US-Standard-E', displayName: 'Voice E (Female, Standard)', gender: 'FEMALE', quality: 'basic', series: 'Standard' },
    { name: 'en-US-Standard-F', displayName: 'Voice F (Female, Standard)', gender: 'FEMALE', quality: 'basic', series: 'Standard' },
    { name: 'en-US-Standard-G', displayName: 'Voice G (Female, Standard)', gender: 'FEMALE', quality: 'basic', series: 'Standard' },
    { name: 'en-US-Standard-H', displayName: 'Voice H (Female, Standard)', gender: 'FEMALE', quality: 'basic', series: 'Standard' },
    { name: 'en-US-Standard-I', displayName: 'Voice I (Male, Standard)', gender: 'MALE', quality: 'basic', series: 'Standard' },
    { name: 'en-US-Standard-J', displayName: 'Voice J (Male, Standard)', gender: 'MALE', quality: 'basic', series: 'Standard' }
  ],
  
  // å…¶ä»–è¯­è¨€ä¿æŒä¸å˜ï¼Œæ‚¨å¯ä»¥ç±»ä¼¼åœ°è·å–å¹¶æ›´æ–°
  'en-GB': [
    { name: 'en-GB-Neural2-A', displayName: 'UK Female (Neural2-A)', gender: 'FEMALE', quality: 'high' },
    { name: 'en-GB-Neural2-B', displayName: 'UK Male (Neural2-B)', gender: 'MALE', quality: 'high' },
    { name: 'en-GB-Neural2-C', displayName: 'UK Female (Neural2-C)', gender: 'FEMALE', quality: 'high' },
    { name: 'en-GB-Neural2-D', displayName: 'UK Male (Neural2-D)', gender: 'MALE', quality: 'high' }
  ],
  'en-AU': [
    { name: 'en-AU-Neural2-A', displayName: 'AU Female (Neural2-A)', gender: 'FEMALE', quality: 'high' },
    { name: 'en-AU-Neural2-B', displayName: 'AU Male (Neural2-B)', gender: 'MALE', quality: 'high' },
    { name: 'en-AU-Neural2-C', displayName: 'AU Female (Neural2-C)', gender: 'FEMALE', quality: 'high' },
    { name: 'en-AU-Neural2-D', displayName: 'AU Male (Neural2-D)', gender: 'MALE', quality: 'high' }
  ]
}

// é»˜è®¤è®¾ç½®é…ç½®
export const DEFAULT_TTS_SETTINGS = {
  language: 'en-US',
  voice: 'auto',
  rate: 1.0,
  pitch: 0,
  encoding: 'MP3'
}

// é¢„è®¾é…ç½®
export const TTS_PRESETS = {
  slow: { 
    name: 'Slow Reading',
    description: 'Suitable for learning',
    rate: 0.7, 
    pitch: 0 
  },
  normal: { 
    name: 'Normal Speed',
    description: 'Standard reading speed',
    rate: 1.0, 
    pitch: 0 
  },
  fast: { 
    name: 'Fast Reading',
    description: 'Quick reading',
    rate: 1.3, 
    pitch: 0 
  }
}

// æ”¯æŒçš„è¯­è¨€åˆ—è¡¨
export const SUPPORTED_LANGUAGES = [
  { code: 'en-US', name: 'English (US)', flag: 'ğŸ‡ºğŸ‡¸' },
  { code: 'en-GB', name: 'English (UK)', flag: 'ğŸ‡¬ğŸ‡§' },
  { code: 'en-AU', name: 'English (AU)', flag: 'ğŸ‡¦ğŸ‡º' }
]

// å·¥å…·å‡½æ•°ï¼šè·å–æŒ‡å®šè¯­è¨€çš„è¯­éŸ³åˆ—è¡¨
export function getVoicesForLanguage(language) {
  return TTS_VOICES[language] || []
}

// å·¥å…·å‡½æ•°ï¼šæ ¹æ®è´¨é‡çº§åˆ«ç­›é€‰è¯­éŸ³
export function getVoicesByQuality(language, quality) {
  const voices = getVoicesForLanguage(language)
  return voices.filter(voice => voice.quality === quality)
}

// å·¥å…·å‡½æ•°ï¼šæ ¹æ®è¯­éŸ³ç³»åˆ—ç­›é€‰è¯­éŸ³
export function getVoicesBySeries(language, series) {
  const voices = getVoicesForLanguage(language)
  return voices.filter(voice => voice.series === series)
}

// å·¥å…·å‡½æ•°ï¼šè·å–æ¨èè¯­éŸ³ï¼ˆä¼˜å…ˆçº§ï¼šChirp3-HD > Chirp-HD > Neural2 > Studio > Newsï¼‰
export function getRecommendedVoice(language, gender = null) {
  const voices = getVoicesForLanguage(language)
  
  // å®šä¹‰è´¨é‡ä¼˜å…ˆçº§
  const qualityPriority = ['premium', 'high', 'medium', 'basic']
  const seriesPriority = ['Chirp3-HD', 'Chirp-HD', 'Neural2', 'Studio', 'News', 'Wavenet', 'Casual', 'Polyglot', 'Standard']
  
  let filtered = voices
  
  // å¦‚æœæŒ‡å®šäº†æ€§åˆ«ï¼Œå…ˆæŒ‰æ€§åˆ«ç­›é€‰
  if (gender) {
    filtered = voices.filter(voice => 
      voice.gender?.toLowerCase() === gender.toLowerCase()
    )
    if (filtered.length === 0) {
      filtered = voices // å¦‚æœæ²¡æœ‰åŒ¹é…çš„æ€§åˆ«ï¼Œåˆ™ä½¿ç”¨å…¨éƒ¨
    }
  }
  
  // æŒ‰è´¨é‡å’Œç³»åˆ—ä¼˜å…ˆçº§æ’åº
  filtered.sort((a, b) => {
    const qualityDiff = qualityPriority.indexOf(a.quality) - qualityPriority.indexOf(b.quality)
    if (qualityDiff !== 0) return qualityDiff
    
    const seriesDiff = seriesPriority.indexOf(a.series) - seriesPriority.indexOf(b.series)
    return seriesDiff
  })
  
  return filtered[0] || null
}

// å·¥å…·å‡½æ•°ï¼šè·å–è¯­éŸ³ç³»åˆ—çš„æè¿°
export function getSeriesDescription(series) {
  const descriptions = {
    'Chirp3-HD': 'æœ€æ–°é«˜çº§AIè¯­éŸ³ï¼Œä»¥å¤©ä½“å‘½åï¼Œæœ€è‡ªç„¶çš„å£°éŸ³è´¨é‡',
    'Chirp-HD': 'é«˜è´¨é‡AIè¯­éŸ³ï¼Œè‡ªç„¶æµç•…',
    'Neural2': 'ç¥ç»ç½‘ç»œè¯­éŸ³ï¼Œé«˜è´¨é‡åˆæˆ',
    'Studio': 'å½•éŸ³æ£šè´¨é‡ï¼Œä¸“ä¸šçº§éŸ³è´¨',
    'News': 'æ–°é—»æ’­æŠ¥é£æ ¼ï¼Œæ¸…æ™°ä¸“ä¸š',
    'Wavenet': 'WaveNetæŠ€æœ¯ï¼Œæ ‡å‡†è´¨é‡',
    'Casual': 'è½»æ¾å¯¹è¯é£æ ¼',
    'Polyglot': 'å¤šè¯­è¨€æ”¯æŒè¯­éŸ³',
    'Standard': 'åŸºç¡€æ ‡å‡†è¯­éŸ³'
  }
  return descriptions[series] || 'æ ‡å‡†è¯­éŸ³'
}

// å·¥å…·å‡½æ•°ï¼šè·å–è´¨é‡ç­‰çº§æè¿°
export function getQualityDescription(quality) {
  const descriptions = {
    'premium': 'é¡¶çº§éŸ³è´¨ (Premium)',
    'high': 'é«˜éŸ³è´¨ (High)',
    'medium': 'ä¸­ç­‰éŸ³è´¨ (Medium)', 
    'basic': 'åŸºç¡€éŸ³è´¨ (Basic)'
  }
  return descriptions[quality] || 'æ ‡å‡†éŸ³è´¨'
}

// å·¥å…·å‡½æ•°ï¼šè·å–æ‰€æœ‰æ”¯æŒçš„è¯­è¨€ä»£ç 
export function getSupportedLanguageCodes() {
  return Object.keys(TTS_VOICES)
}

// å·¥å…·å‡½æ•°ï¼šéªŒè¯è®¾ç½®
export function validateTTSSettings(settings) {
  const errors = []
  
  if (!settings.language || !getSupportedLanguageCodes().includes(settings.language)) {
    errors.push('Invalid language code')
  }
  
  if (settings.rate < 0.25 || settings.rate > 4.0) {
    errors.push('Rate must be between 0.25 and 4.0')
  }
  
  if (settings.pitch < -20 || settings.pitch > 20) {
    errors.push('Pitch must be between -20 and 20')
  }
  
  return {
    isValid: errors.length === 0,
    errors
  }
}
